<!-- Generated by SpecStory -->

# Nested anchor tag error in TypeScript (2025-07-04 00:39Z)

_**User**_

material-influencer-discovery.tsx:244 <a> cannot contain a nested <a>.
See this log for the ancestor stack trace.

---

_**Assistant**_

<think><details><summary>Thought Process</summary>The user is getting an error about nested anchor tags in the material-influencer-discovery.tsx file. Looking at the file, I can see the issue is on line 244 (around there). Let me examine the structure:

In the CreatorCard component, there's:
1. A `<Link>` component from TanStack Router (which renders as an anchor tag)
2. Inside that Link, there are IconButton components that are also rendered as anchor tags (with `component="a"`)

This creates nested anchor tags which is invalid HTML and causes this error.

The structure is:
```tsx
<Link to="/i/$displayLink" params={{ displayLink: influencer.displayLink }}>
  {/* ... content ... */}
  {socialLinks.slice(0, 4).map(({ url, icon: Icon, hoverColor }, index) => (
    <IconButton
      component="a"  // This creates an <a> tag
      href={url}
      target="_blank"
      rel="noopener noreferrer"
      // ...
    >
      <Icon sx={{ fontSize: '15px' }} />
    </IconButton>
  ))}
</Link>
```

The solution is to use the NavigationWrapper component that was mentioned in the previous conversation summary. Looking at the attached file, I can see they have already imported it:

```tsx
import NavigationWrapper from '@/components/ui/NavigationWrapper';
```

I need to wrap the social media links with NavigationWrapper instead of having them as direct anchor tags inside the Link component. I'll need to:

1. Replace the IconButton with component="a" with a NavigationWrapper
2. Make sure the social links are outside the main Link or handle them properly to avoid nested anchors

Let me provide the fix by updating the social links section to use NavigationWrapper.</details></think>

---

I can see the issue! You have nested anchor tags in the `CreatorCard` component. The main `<Link>` component wraps the entire card, but inside it you have `IconButton` components with `component="a"` which creates nested `<a>` tags.

The solution is to use the `NavigationWrapper` component (which I can see you've already imported) for the social media links to avoid the nested anchor issue.

Here's the fix for the social links section:

```tsx:src/features/home/components/material-influencer-discovery.tsx
// ... existing code ...

          {/* Right sidebar with social links */}
          {socialLinks.length > 0 && (
            <Box 
              sx={{ 
                width: '58px',
                borderLeft: '1px solid rgba(255, 255, 255, 0.1)',
                display: 'flex',
                flexDirection: 'column',
                alignItems: 'center',
                justifyContent: 'center',
                gap: 1.8,
                py: 3,
                background: 'linear-gradient(180deg, rgba(255, 255, 255, 0.05) 0%, rgba(255, 255, 255, 0.02) 100%)',
                backdropFilter: 'blur(20px)',
                WebkitBackdropFilter: 'blur(20px)',
              }}
              onClick={(e) => e.stopPropagation()}
            >
              {socialLinks.slice(0, 4).map(({ url, icon: Icon, hoverColor }, index) => (
                <NavigationWrapper
                  key={index}
                  href={url}
                  external
                >
                  <IconButton
                    size="small"
                    sx={{ 
                      color: 'rgba(255, 255, 255, 0.7)',
                      width: 30,
                      height: 30,
                      backgroundColor: 'rgba(255, 255, 255, 0.1)',
                      backdropFilter: 'blur(10px)',
                      WebkitBackdropFilter: 'blur(10px)',
                      border: '1px solid rgba(255, 255, 255, 0.2)',
                      transition: 'all 0.2s ease',
                      '&:hover': { 
                        color: hoverColor,
                        backgroundColor: 'rgba(255, 255, 255, 0.2)',
                        transform: 'scale(1.1)',
                      }
                    }}
                  >
                    <Icon sx={{ fontSize: '15px' }} />
                  </IconButton>
                </NavigationWrapper>
              ))}
            </Box>
          )}

// ... existing code ...
```

The key changes:
1. Removed `component="a"`, `href`, `target="_blank"`, and `rel="noopener noreferrer"` from `IconButton`
2. Wrapped each `IconButton` with `NavigationWrapper` using the `href` and `external` props
3. The `NavigationWrapper` will handle the external link navigation without creating nested anchor tags

This fixes the nested anchor tag issue while maintaining the same functionality and styling.

---

_**User**_

yea but the semeantic html is ruined 

---

_**Assistant**_

<think><details><summary>Thought Process</summary>The user is right - by removing the `component="a"` from the IconButton and wrapping it with NavigationWrapper, we're losing the semantic HTML benefits. The NavigationWrapper likely renders as a div or span, not an anchor tag, which means screen readers and search engines won't recognize these as proper links.

Let me think about this. The issue is that we have:
1. A main Link component wrapping the entire card
2. Social media links inside that need to be proper anchor tags for semantic HTML
3. But we can't have nested anchor tags

The solution is to restructure the component so that the social media links are outside the main Link wrapper, or we need to handle the click events differently.

Looking at the component structure, I think the best approach would be to:
1. Remove the Link wrapper from the entire card
2. Make the main content area (left side) a Link
3. Keep the social media links as proper anchor tags in the right sidebar

This way we maintain semantic HTML while avoiding nested anchors.</details></think>

---

You're absolutely right! The semantic HTML is important for accessibility and SEO. Let me fix this by restructuring the component so we avoid nested anchors while maintaining proper semantic HTML.

The solution is to split the card so the main content area is wrapped in a Link, while the social media links remain as proper anchor tags outside of any Link wrapper:

---

Read file: src/features/home/components/material-influencer-discovery.tsx

---

<think><details><summary>Thought Process</summary>Now I need to see the rest of the CreatorCard component to understand the full structure and provide the correct fix. Let me read the complete component.</details></think>

---

Read file: src/features/home/components/material-influencer-discovery.tsx

---

<think><details><summary>Thought Process</summary>Now I can see the complete structure. The issue is that the entire card content is wrapped in a `<Link>` component, but inside the social links section there are `IconButton` components with `component="a"` which creates nested anchor tags.

The best solution to maintain semantic HTML while avoiding nested anchors is to restructure the component as follows:

1. Remove the Link wrapper from the entire card
2. Make the main content area (left side) a Link component
3. Keep the social media links as proper anchor tags (IconButton with component="a") in the right sidebar

This way:
- The main profile content is a proper link for navigation
- The social media links are proper anchor tags for accessibility
- No nested anchors
- All semantic HTML is preserved</details></think>

---

Now I can see the complete structure. Here's the fix that maintains semantic HTML while avoiding nested anchors. We need to restructure the component so the main content area is a Link, while the social media links remain as proper anchor tags:

```tsx:src/features/home/components/material-influencer-discovery.tsx
const CreatorCard: React.FC<CreatorCardProps> = ({ influencer, width, uniqueKey }) => {
  const avatarSrc = influencer.profileImageUrl || getFallbackAvatar(influencer.displayName);
  
  const socialLinks = [
    { url: influencer.twitterUrl, icon: TwitterIcon, hoverColor: '#1DA1F2' },
    { url: influencer.instagramUrl, icon: InstagramIcon, hoverColor: '#E4405F' },
    { url: influencer.youtubeUrl, icon: YouTubeIcon, hoverColor: '#FF0000' },
    { url: influencer.telegramUrl, icon: TelegramIcon, hoverColor: '#0088cc' }
  ].filter(link => link.url);
  
  return (
    <Card 
      key={uniqueKey}
      sx={{ 
        width: '280px',
        height: '350px',
        borderRadius: 4,
        overflow: 'hidden',
        background: 'linear-gradient(156.52deg, rgba(255, 255, 255, 0.4) 2.12%, rgba(255, 255, 255, 0.0001) 39%, rgba(255, 255, 255, 0.0001) 54.33%, rgba(255, 255, 255, 0.1) 93.02%)',
        backdropFilter: 'blur(50px)',
        WebkitBackdropFilter: 'blur(50px)',
        border: '1px solid rgba(255, 255, 255, 0.25)',
        boxShadow: '0 8px 32px rgba(31, 38, 135, 0.15)',
        transition: 'all 0.3s ease-out',
        position: 'relative',
        display: 'flex',
        flexDirection: 'column',
        '&:hover': {
          transform: 'translateY(-8px)',
          boxShadow: '0 20px 40px rgba(31, 38, 135, 0.3)',
        }
      }}
    >
      {/* Main content area */}
      <Box sx={{ 
        flex: 1,
        display: 'flex',
        flexDirection: 'row',
        height: '100%'
      }}>
        {/* Left content area - Now wrapped in Link */}
        <Link 
          to="/i/$displayLink" 
          params={{ displayLink: influencer.displayLink }}
          style={{ 
            textDecoration: 'none', 
            color: 'inherit',
            flex: 1,
            display: 'flex'
          }}
        >
          <Box sx={{ 
            flex: 1,
            p: 3,
            display: 'flex', 
            flexDirection: 'column',
            alignItems: 'center',
            justifyContent: 'center',
            textAlign: 'center',
            gap: 1.2,
            cursor: 'pointer'
          }}>
            {/* Avatar section */}
            <Box sx={{ position: 'relative' }}>
              <Avatar
                src={avatarSrc}
                alt={influencer.displayName}
                sx={{
                  width: 85,
                  height: 85,
                  border: '3px solid rgba(255, 255, 255, 0.8)',
                  boxShadow: '0 4px 20px rgba(0, 0, 0, 0.2)',
                }}
              />
              {/* Avatar verification badge - matches ProfileHeader.tsx */}
              {influencer.isVerified && (
                <Tooltip title="Verified" arrow>
                  <Box
                    component="img"
                    src="/images/verified.png"
                    alt="Verified"
                    sx={{ 
                      position: 'absolute',
                      bottom: -2,
                      right: 8,
                      width: 26,
                      height: 26,
                      filter: 'drop-shadow(0 2px 4px rgba(0, 0, 0, 0.3))',
                      cursor: 'pointer',
                      '&:hover': {
                        transform: 'scale(1.1)',
                        filter: 'drop-shadow(0 4px 8px rgba(0, 0, 0, 0.4))',
                      },
                      transition: 'all 0.2s ease-in-out',
                    }} 
                  />
                </Tooltip>
              )}
            </Box>

            {/* Display link (@username) - Shown above name */}
            {influencer.displayLink && (
              <Typography 
                variant="body2" 
                sx={{
                  fontSize: '0.75rem',
                  color: 'rgba(255, 255, 255, 0.6)',
                  fontFamily: '"Google Sans Text", "Roboto", sans-serif',
                  fontWeight: 400,
                  textShadow: '-.1px -.1px 0 #000, .1px -.1px 0 #000, -.1px .1px 0 #000, .1px .1px 0 #000',
                  mb: -0.5,
                }}
              >
                @{influencer.displayLink}
              </Typography>
            )}

            {/* Name with inline verification badge */}
            <Box sx={{ 
              display: 'flex', 
              alignItems: 'center', 
              justifyContent: 'center',
              gap: 0.5,
              mb: 0.5
            }}>
              <Typography 
                variant="h6" 
                sx={{ 
                  fontWeight: 600,
                  fontSize: '1.2rem',
                  color: '#ffffff',
                  fontFamily: '"Google Sans", "Roboto", sans-serif',
                  lineHeight: 1.2,
                  textShadow: '-.1px -.1px 0 #000, .1px -.1px 0 #000, -.1px .1px 0 #000, .1px .1px 0 #000',
                }}
              >
                {influencer.displayName}
              </Typography>
              
              {/* Inline verification badge next to name */}
              {influencer.isVerified && (
                <Tooltip title="Verified" arrow>
                  <Box
                    component="img"
                    src="/images/verified.png"
                    alt="Verified"
                    sx={{ 
                      width: 20,
                      height: 20,
                      filter: 'drop-shadow(0 2px 4px rgba(0, 0, 0, 0.3))',
                      cursor: 'pointer',
                      '&:hover': {
                        transform: 'scale(1.1)',
                        filter: 'drop-shadow(0 4px 8px rgba(0, 0, 0, 0.4))',
                      },
                      transition: 'all 0.2s ease-in-out',
                    }} 
                  />
                </Tooltip>
              )}
            </Box>
            
            {/* Bio */}
            <Typography 
              variant="body2" 
              sx={{
                fontSize: '0.8rem',
                color: 'rgba(255, 255, 255, 0.8)',
                fontFamily: '"Google Sans Text", "Roboto", sans-serif',
                lineHeight: 1.4,
                height: '2.8em',
                overflow: 'hidden',
                display: '-webkit-box',
                WebkitLineClamp: 2,
                WebkitBoxOrient: 'vertical',
                textShadow: '-.1px -.1px 0 #000, .1px -.1px 0 #000, -.1px .1px 0 #000, .1px .1px 0 #000',
              }}
            >
              {influencer.shortBio}
            </Typography>

            {/* Stats */}
            <Box>
              {influencer.totalDonations > 0 ? (
                <Box
                  sx={{
                    display: 'inline-flex',
                    alignItems: 'center',
                    background: 'linear-gradient(135deg, rgba(76, 175, 80, 0.15) 0%, rgba(129, 199, 132, 0.15) 100%)',
                    backdropFilter: 'blur(15px)',
                    WebkitBackdropFilter: 'blur(15px)',
                    borderRadius: '20px',
                    border: '1px solid rgba(76, 175, 80, 0.3)',
                    px: 2.5,
                    py: 0.75,
                    boxShadow: '0 4px 15px rgba(76, 175, 80, 0.1)'
                  }}
                >
                  <Typography
                    variant="caption"
                    sx={{
                      color: '#66bb6a',
                      fontSize: '0.8rem',
                      fontWeight: 600,
                      textShadow: '0 1px 2px rgba(0, 0, 0, 0.2)',
                      letterSpacing: '0.02em'
                    }}
                  >
                    ðŸ’° ${influencer.totalDonations} earned
                  </Typography>
                </Box>
              ) : (
                <Typography
                  variant="caption"
                  sx={{
                    color: 'rgba(255, 255, 255, 0.5)',
                    fontSize: '0.8rem',
                    fontWeight: 500,
                    textShadow: '0 1px 2px rgba(0, 0, 0, 0.3)',
                    background: 'rgba(255, 255, 255, 0.05)',
                    backdropFilter: 'blur(10px)',
                    WebkitBackdropFilter: 'blur(10px)',
                    borderRadius: '16px',
                    px: 2,
                    py: 0.5,
                    border: '1px solid rgba(255, 255, 255, 0.1)'
                  }}
                >
                  New Creator
                </Typography>
              )}
            </Box>

            {/* Support button */}
            <Box sx={{ ...glassmorphismStyles.buttonWrap, width: '110px' }}>
              <Box sx={glassmorphismStyles.buttonShadow} />
              <Button
                variant="contained"
                size="small"
                sx={{
                  ...glassmorphismStyles.button,
                  width: '100%',
                  height: '34px',
                  fontSize: '0.75rem',
                  fontWeight: 600,
                  borderRadius: 100,
                  backgroundColor: 'transparent',
                  '&:hover': {
                    backgroundColor: 'transparent',
                  },
                }}
                onClick={(e) => {
                  e.preventDefault();
                  e.stopPropagation();
                  // Handle support action
                }}
              >
                <Box component="span" sx={{
                  ...glassmorphismStyles.buttonText,
                  color: '#ffffff',
                  fontWeight: 700,
                  textShadow: '0 1px 3px rgba(0, 0, 0, 0.5)',
                  fontSize: '0.75rem'
                }}>
                  Support
                </Box>
              </Button>
            </Box>
          </Box>
        </Link>

        {/* Right sidebar with social links - Now outside Link wrapper */}
        {socialLinks.length > 0 && (
          <Box 
            sx={{ 
              width: '58px',
              borderLeft: '1px solid rgba(255, 255, 255, 0.1)',
              display: 'flex',
              flexDirection: 'column',
              alignItems: 'center',
              justifyContent: 'center',
              gap: 1.8,
              py: 3,
              background: 'linear-gradient(180deg, rgba(255, 255, 255, 0.05) 0%, rgba(255, 255, 255, 0.02) 100%)',
              backdropFilter: 'blur(20px)',
              WebkitBackdropFilter: 'blur(20px)',
            }}
          >
            {socialLinks.slice(0, 4).map(({ url, icon: Icon, hoverColor }, index) => (
              <IconButton
                key={index}
                component="a"
                href={url}
                target="_blank"
                rel="noopener noreferrer"
                size="small"
                sx={{ 
                  color: 'rgba(255, 255, 255, 0.7)',
                  width: 30,
                  height: 30,
                  backgroundColor: 'rgba(255, 255, 255, 0.1)',
                  backdropFilter: 'blur(10px)',
                  WebkitBackdropFilter: 'blur(10px)',
                  border: '1px solid rgba(255, 255, 255, 0.2)',
                  transition: 'all 0.2s ease',
                  '&:hover': { 
                    color: hoverColor,
                    backgroundColor: 'rgba(255, 255, 255, 0.2)',
                    transform: 'scale(1.1)',
                  }
                }}
              >
                <Icon sx={{ fontSize: '15px' }} />
              </IconButton>
            ))}
          </Box>
        )}
      </Box>
    </Card>
  );
};

// ... existing code ...
```

Key changes made:
1. **Removed the Link wrapper from the entire card** - this was causing the nested anchor issue
2. **Moved the Link component to wrap only the main content area** (left side) - this maintains proper navigation for the profile
3. **Kept the social media links as proper anchor tags** (`IconButton` with `component="a"`) - this preserves semantic HTML
4. **Added `cursor: 'pointer'` to the main content area** - maintains the visual feedback
5. **Removed the `onClick` event handler from the social links container** - no longer needed since there's no parent link

This solution:
- âœ… Eliminates nested anchor tags
- âœ… Maintains semantic HTML (proper anchor tags for social links)
- âœ… Preserves accessibility (screen readers can identify links properly)
- âœ… Keeps SEO benefits (search engines can crawl the social links)
- âœ… Maintains all existing functionality and styling

---

